<!DOCTYPE html><html lang="en-US"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>OPC UA Server and Client Simple Example – Python</title><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" media="print" onload="this.media='all'"> <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"> </noscript><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="manifest" href="/assets/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="#f0f0f0"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Pawankumar Gurav's App"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="msapplication-TileColor" content="#2d89ef"><meta name="msapplication-starturl" content="/"><meta name="application-name" content="Pawankumar Gurav's App"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><link rel="canonical" href="http://localhost:4000/kukaserver.html" /><link rel="alternate" hreflang="x-default" href="http://localhost:4000/kukaserver.html" /><link rel="alternate" hreflang="en-US" href="http://localhost:4000/kukaserver.html" /><link rel="alternate" hreflang="en" href="http://localhost:4000/kukaserver.html" /><link rel="canonical" href="http://localhost:4000/HRC.html" /><link rel="alternate" hreflang="x-default" href="http://localhost:4000/HRC.html" /><link rel="alternate" hreflang="en-US" href="http://localhost:4000/HRC.html" /><link rel="alternate" hreflang="en" href="http://localhost:4000/HRC.html" /><link rel="canonical" href="http://localhost:4000/IndustrialAutomation.html" /><link rel="alternate" hreflang="x-default" href="http://localhost:4000/IndustrialAutomation.html" /><link rel="alternate" hreflang="en-US" href="http://localhost:4000/IndustrialAutomation.html" /><link rel="alternate" hreflang="en" href="http://localhost:4000/IndustrialAutomation.html" /><link rel="canonical" href="http://localhost:4000/zoomEarth.html" /><link rel="alternate" hreflang="x-default" href="http://localhost:4000/zoomEarth.html" /><link rel="alternate" hreflang="en-US" href="http://localhost:4000/zoomEarth.html" /><link rel="alternate" hreflang="en" href="http://localhost:4000/zoomEarth.html" /><link rel="canonical" href="http://localhost:4000/cobot.html" /><link rel="alternate" hreflang="x-default" href="http://localhost:4000/cobot.html" /><link rel="alternate" hreflang="en-US" href="http://localhost:4000/cobot.html" /><link rel="alternate" hreflang="en" href="http://localhost:4000/cobot.html" /><link rel="canonical" href="http://localhost:4000/amplication.html" /><link rel="alternate" hreflang="x-default" href="http://localhost:4000/amplication.html" /><link rel="alternate" hreflang="en-US" href="http://localhost:4000/amplication.html" /><link rel="alternate" hreflang="en" href="http://localhost:4000/amplication.html" /><link rel="canonical" href="http://localhost:4000/KUKA-OPC.html" /><link rel="alternate" hreflang="x-default" href="http://localhost:4000/KUKA-OPC.html" /><link rel="alternate" hreflang="en-US" href="http://localhost:4000/KUKA-OPC.html" /><link rel="alternate" hreflang="en" href="http://localhost:4000/KUKA-OPC.html" /><link rel="canonical" href="http://localhost:4000/FRI.html" /><link rel="alternate" hreflang="x-default" href="http://localhost:4000/FRI.html" /><link rel="alternate" hreflang="en-US" href="http://localhost:4000/FRI.html" /><link rel="alternate" hreflang="en" href="http://localhost:4000/FRI.html" /><meta name="keywords" content="jekyll, robotics, Industrial Automation, example post"><meta name="description" content="OPC Unified Architecture (OPC UA) is a machine to machine communication protocol for industrial automation developed by the OPC Foundation. Below i..."><meta name="robots" content="index, follow"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="OPC UA Server and Client Simple Example – Python"><meta name="twitter:description" content="OPC Unified Architecture (OPC UA) is a machine to machine communication protocol for industrial automation developed by the OPC Foundation. Below is the example code..."><meta name="twitter:image" content="http://localhost:4000/assets/img/posts/kukarsi.jpg"><meta property="og:site_name" content="Pawankumar Gurav"><meta property="og:type" content="article"><meta property="og:title" content="OPC UA Server and Client Simple Example – Python"><meta property="og:description" content="OPC Unified Architecture (OPC UA) is a machine to machine communication protocol for industrial automation developed by the OPC Foundation. Below i..."><meta property="og:url" content="http://localhost:4000/KUKA-OPC.html"><meta property="og:image" content="http://localhost:4000/assets/img/posts/kukarsi.jpg"><meta property="og:locale" content="en_US" ><meta property="og:locale" content="en_US" ><meta property="og:locale" content="en_US" ><meta property="og:locale" content="en_US" ><meta property="og:locale" content="en_US" ><meta property="og:locale" content="en_US" ><meta property="og:locale" content="en_US" ><meta property="og:locale" content="en_US" ><meta property="article:author" content="Pawankumar Gurav"><meta property="article:section" content="jekyll"><meta property="article:tag" content="robotics"><meta property="article:tag" content="Industrial Automation"><meta property="article:tag" content="example post"> <script type="application/ld+json">{ "@context": "https://schema.org" ,"@graph": [ { "@type": "Person" ,"@id": "http://localhost:4000/#person" ,"name": "Pawankumar Gurav" ,"url": "http://localhost:4000/tabs/about.html" ,"image": "http://localhost:4000/assets/img/about/about.jpg" ,"description": "Pawankumar Gurav is a graduate in Mechanical Engineering from Shivaji University. He has over 5 years of experience in KUKA Robotics for Product Su..." },{ "@type": "WebSite" ,"@id": "http://localhost:4000/#website" ,"url": "http://localhost:4000/" ,"name": "Pawankumar Gurav" ,"description": "Pawankumar Gurav is a graduate in Mechanical Engineering from Shivaji University. He has over 5 years of experience in KUKA Robotics for Product Su..." ,"publisher": {"@id": "http://localhost:4000/#person"} ,"inLanguage": "en-US" ,"copyrightHolder" : {"@id": "http://localhost:4000/#person"} ,"copyrightYear" : "2022" },{ "@type": "WebPage" ,"@id": "http://localhost:4000/KUKA-OPC.html#webpage" ,"url": "http://localhost:4000/KUKA-OPC.html" ,"name": "OPC UA Server and Client Simple Example – Python" ,"isPartOf": {"@id": "http://localhost:4000/#website"} ,"breadcrumb": {"@id": "http://localhost:4000/KUKA-OPC.html#breadcrumb"} ,"primaryImageOfPage": "http://localhost:4000/assets/img/posts/kukarsi.jpg" ,"description": "OPC Unified Architecture (OPC UA) is a machine to machine communication protocol for industrial automation developed by the OPC Foundation. Below i..." ,"inLanguage": "en-US" ,"potentialAction": { "@type": "ReadAction" ,"target": "http://localhost:4000/KUKA-OPC.html" } },{ "@type": "BreadcrumbList", "@id": "http://localhost:4000/KUKA-OPC.html#breadcrumb", "itemListElement": [ { "@type": "ListItem" ,"position": 1 ,"name": "Home" ,"item": "http://localhost:4000/" }, { "@type": "ListItem" ,"position": 2 ,"name": "Blog" ,"item": "http://localhost:4000/tabs/blog/" }, { "@type": "ListItem" ,"position": 3 ,"name": "OPC UA Server and Client Simple Example – Python" } ] },{ "@type": "BlogPosting" ,"@id": "http://localhost:4000/KUKA-OPC.html#content" ,"isPartOf": {"@id": "http://localhost:4000/KUKA-OPC.html#webpage"} ,"mainEntityOfPage": {"@id": "http://localhost:4000/KUKA-OPC.html#webpage"} ,"publisher": {"@id": "http://localhost:4000/#person"} ,"author": {"@id": "http://localhost:4000/#person"} ,"inLanguage": "en-US" ,"headline": "OPC UA Server and Client Simple Example – Python" ,"image": "http://localhost:4000/assets/img/posts/kukarsi.jpg" ,"thumbnailUrl": "http://localhost:4000/assets/img/posts/kukarsi.jpg" ,"articleSection": ["jekyll", "robotics", "Industrial Automation", "example post"] ,"description": "OPC Unified Architecture (OPC UA) is a machine to machine communication protocol for industrial automation developed by the OPC Foundation. Below i..." ,"copyrightHolder" : {"@id": "http://localhost:4000/#person"} ,"copyrightYear" : "2022" ,"wordCount": 382 ,"articleBody": "OPC Unified Architecture (OPC UA) is a machine to machine communication protocol for industrial automation developed by the OPC Foundation. Below is the example code to exhange data between two machine in network. As a example we are using python. Create Test Server on Machine 1: from opcua import Server from random import randint import datetime import time server = Server() url = \"opc.tcp://127.0.0.1:4840\" server.set_endpoint(url) name = \"OPC_SIMULATION_SERVER\" addspace = server.register_namespace(name) node = server.get_objects_node() Param = node.add_object(addspace, \"Parameters\") Temp = Param.add_variable(addspace, \"Temperature\", 0) Press = Param.add_variable(addspace, \"Pressure\", 0) Time = Param.add_variable(addspace, \"Time\", 0) Temp.set_writable() Press.set_writable() Time.set_writable() server.start() print(\"Server started at {}\".format(url)) while True: Temperature = randint(10,50) Pressure = randint(200, 999) TIME = datetime.datetime.now() print(Temperature, Pressure, TIME) Temp.set_value(Temperature) Press.set_value(Pressure) Time.set_value(TIME) time.sleep(0.1) Create Test Client Machine 2: from opcua import Client import time url = \"opc.tcp://127.0.0.1:4840\" client = Client(url) client.connect() print(\"Client Connected\") while True: Temp = client.get_node(\"ns=2;i=2\") Temperature = Temp.get_value() print(Temperature) Download and Install OPC UA Client Free from Unified Automation Website ( https://www.unified-automation.com/downloads/opc-ua-clients.html ) to view Node ids. Connect Machine 1 and Machine 2 with suitable network (e.g. Ethernet) Start server and then run client Client will print fetched data from Server. That’s cool Testing is completed ! Also, Example Code for OPC UA Client for KUKA OPC UA Server on Robot Controller: Code has to run on client side(Laptop with Python installed). Prerequisites: 1.OPC UA installed on KUKA Controller. Install OPCUA using PIP install PIP Install Cryptography Below code will connect with KUKA Controller OPC port &gt; fetch data from node &gt; Print Data (Here MyPos Variable from $config.dat)&gt;Logs data to CSV file to specified path. from opcua import Client import time import csv print(\"Starting\") url = \"opc.tcp://192.168.1.147:4840\" # IP Address of KLI - KUKA client = Client(url) client.set_user(\"opcuaoperator\")#Check username with KUKA OPC Documentation client.set_password(\"kuka\")#Check password with KUKA OPC Documentation client.connect() print(\"Client Connected to KUKA OPC Server\") X = client.get_node(\"ns=5;s=MotionDeviceSystem.ProcessData.R1.System.$config.MYPOS.X\") Y = client.get_node(\"ns=5;s=MotionDeviceSystem.ProcessData.R1.System.$config.MYPOS.Y\") Z = client.get_node(\"ns=5;s=MotionDeviceSystem.ProcessData.R1.System.$config.MYPOS.Z\") # $ACCU_STATE is battery state Xx = str(X.get_value()) Yy = str(Y.get_value()) Zz = str(Z.get_value()) print(\"My Pos:\" + \"X : \" + Xx + \" Y: \" + Yy + \" Z: \" + Zz) temp = X.set_value(1200) temp = Y.set_value(5) temp = Z.set_value(1174) with myFile: writer = csv.writer(myFile) writer.writerows([now,now]) with open(\"E:/\"filename\".csv\", \"a\") as log: log.write(\"{0},{1}\\n\".format(now,str(Xx))) See complete “KUKA OPC UA with GUI on Python” at https://github.com/pawankumargurav/kukaopcua" } ] }</script><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><link href="/assets/css/main.css" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v0.4.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.css"><link href="/assets/css/nav-media.css" rel="stylesheet"></head><body > <script src="/assets/js/color-scheme-attr-init.js" data-mode="false"></script><nav class="navbar navbar-default top-nav"><div class="navbar-header"> <button type="button" class="navbar-toggle collapsed pull-left top-nav-menu-toggle" data-toggle="collapse" data-target="#id_top-nav-menu-toggle" aria-expanded="false"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand top-nav-brand" href="/" translate="no">Pawankumar Gurav</a></div><div class="color_scheme_switch_top_holder" data-toggle="tooltip" data-placement="bottom" title="Color scheme"> <label class="color-scheme-switch hover-effect"> <input type="checkbox" class="checkbox_color_switch" /> <span></span> </label></div></nav><style> .typethis { border-right: solid 5px rgba(255, 255, 255, .75); white-space: nowrap; overflow: hidden; font-family: 'Source Code Pro', monospace; font-size: 28px; color: rgba(255, 255, 255, .70); } /* Animation */ .typethis { animation: animated-text 2s linear 1s 1 normal both, animated-cursor 600ms linear infinite; } /* text animation */ @keyframes animated-text { from { width: 0; } to { width: 200px; } } /* cursor animations */ @keyframes animated-cursor { from { border-right-color: rgba(255, 255, 255, .75); } to { border-right-color: transparent; } }</style><nav id="side-nav-container"><div class="side-nav"><div class="side-nav-brand"> <img src="/assets/img/posts/post_pic1.jpg" alt="check pawan"><div class="brand-holder"> <a href="/" translate="no">Pawankumar Gurav</a></div><p class="typethis">&nbsp;be simple, think simple&nbsp;</p><br></div><br> <a href="javascript:void(0);" class="side-nav-close"> <i class="fa fa-angle-double-left fa-2x" aria-hidden="true"></i> </a><hr> <br><div class="side-nav-buttons"><ul class="nav nav-pills nav-stacked"><li ><a href="/" class=" hover-effect"><i class="fa-fw fa fa-home" aria-hidden="true"></i>Home</a></li><li ><a href="/tabs/blog/" class="active-page hover-effect"><i class="fa-fw fa fa-pencil-square-o" aria-hidden="true"></i>Blog</a></li><li ><a href="/tabs/archive.html" class=" hover-effect"><i class="fa-fw fa fa-archive" aria-hidden="true"></i>Timeline</a></li><li ><a href="/tabs/projects.html" class=" hover-effect"><i class="fa-fw fa fa-cog" aria-hidden="true"></i>Projects</a></li><li ><a href="/tabs/links.html" class=" hover-effect"><i class="fa-fw fa fa-link" aria-hidden="true"></i>Links</a></li></ul></div><br> <br><hr id="toc-view-top"><div class="side-nav-footer" translate="no"><p>&copy; 2022 Pawankumar Gurav.</p></div></div><div class="side-nav-bottom-buttons-container"><hr><ul><li><div class="color_scheme_switch_side_holder" data-toggle="tooltip" data-placement="top" title="Color scheme"> <label class="color-scheme-switch hover-effect"> <input type="checkbox" class="checkbox_color_switch" /> <span></span> </label></div></li><li><div class="cookie-icon hover-effect" onclick="CookieConsent.showSettings();" data-toggle="tooltip" data-placement="top" title="Cookie settings"><div class="cookie-wrapper"> <i class="fa fa-circle bitten-cookie" aria-hidden="true"></i> <i class="fa fa-circle small-ellipse-icon" aria-hidden="true"></i> <i class="fa fa-spinner inner-icon" aria-hidden="true"></i> <i class="fa fa-circle-thin outer-icon" aria-hidden="true"></i></div></div></li></ul></div></nav><div id="toc-container" class="movable"><div class="panel panel-default"><div class="panel-heading" data-toggle="tooltip" data-placement="top" title="Drag to move"> Contents <span class="pull-right"> <a href="javascript:void(0);" class="close-button" onclick="document.getElementById('toc-container').style.display = 'none';"> <i class="fa fa-times" data-toggle="tooltip" data-placement="bottom" title="Close"></i> </a> </span></div><div class="panel-body"><nav id="table-of-contents"></nav></div></div></div><div id="main-wrapper"><div class="main-container"><div class="multipurpose-container post-container"><div class="post-title"><h1>OPC UA Server and Client Simple Example – Python</h1></div><div class="meta"> <small> &nbsp;<i class="fa fa-calendar"></i>&nbsp;&nbsp;Apr 1, 2019 </small> <small> &nbsp;&nbsp;&nbsp;<span><i class="fa fa-clock-o"></i>&nbsp;4 min read</span> </small></div><hr/><div class="markdown-style"><p>OPC Unified Architecture (OPC UA) is a machine to machine communication protocol for industrial automation developed by the OPC Foundation.</p><p>Below is the example code to exhange data between two machine in network.</p><p>As a example we are using python.</p><p><b>Create Test Server on Machine 1:</b></p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">opcua</span> <span class="kn">import</span> <span class="n">Server</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">time</span>


<span class="n">server</span> <span class="o">=</span> <span class="n">Server</span><span class="p">()</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"opc.tcp://127.0.0.1:4840"</span>
<span class="n">server</span><span class="p">.</span><span class="n">set_endpoint</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">name</span> <span class="o">=</span> <span class="s">"OPC_SIMULATION_SERVER"</span>
<span class="n">addspace</span> <span class="o">=</span> <span class="n">server</span><span class="p">.</span><span class="n">register_namespace</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<span class="n">node</span> <span class="o">=</span> <span class="n">server</span><span class="p">.</span><span class="n">get_objects_node</span><span class="p">()</span>

<span class="n">Param</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="n">add_object</span><span class="p">(</span><span class="n">addspace</span><span class="p">,</span> <span class="s">"Parameters"</span><span class="p">)</span>

<span class="n">Temp</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="n">add_variable</span><span class="p">(</span><span class="n">addspace</span><span class="p">,</span> <span class="s">"Temperature"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">Press</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="n">add_variable</span><span class="p">(</span><span class="n">addspace</span><span class="p">,</span> <span class="s">"Pressure"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">Time</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="n">add_variable</span><span class="p">(</span><span class="n">addspace</span><span class="p">,</span> <span class="s">"Time"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">Temp</span><span class="p">.</span><span class="n">set_writable</span><span class="p">()</span>
<span class="n">Press</span><span class="p">.</span><span class="n">set_writable</span><span class="p">()</span>
<span class="n">Time</span><span class="p">.</span><span class="n">set_writable</span><span class="p">()</span>

 <span class="n">server</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
 <span class="k">print</span><span class="p">(</span><span class="s">"Server started at {}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

 <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">Temperature</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">Pressure</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">999</span><span class="p">)</span>
    <span class="n">TIME</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>

    <span class="k">print</span><span class="p">(</span><span class="n">Temperature</span><span class="p">,</span> <span class="n">Pressure</span><span class="p">,</span> <span class="n">TIME</span><span class="p">)</span>

    <span class="n">Temp</span><span class="p">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">Temperature</span><span class="p">)</span>
    <span class="n">Press</span><span class="p">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">Pressure</span><span class="p">)</span>

    <span class="n">Time</span><span class="p">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">TIME</span><span class="p">)</span>

    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</code></pre></div></div><p><b>Create Test Client Machine 2:</b></p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">opcua</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"opc.tcp://127.0.0.1:4840"</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">client</span><span class="p">.</span><span class="n">connect</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Client Connected"</span><span class="p">)</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
           <span class="n">Temp</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">get_node</span><span class="p">(</span><span class="s">"ns=2;i=2"</span><span class="p">)</span>
           <span class="n">Temperature</span> <span class="o">=</span> <span class="n">Temp</span><span class="p">.</span><span class="n">get_value</span><span class="p">()</span>
           <span class="k">print</span><span class="p">(</span><span class="n">Temperature</span><span class="p">)</span>
</code></pre></div></div><p>Download and Install OPC UA Client Free from Unified Automation Website ( https://www.unified-automation.com/downloads/opc-ua-clients.html ) to view Node ids.</p><p>Connect Machine 1 and Machine 2 with suitable network (e.g. Ethernet)</p><p>Start server and then run client</p><p>Client will print fetched data from Server.</p><p>That’s cool Testing is completed !</p><p>Also,</p><p>Example Code for OPC UA Client for KUKA OPC UA Server on Robot Controller:</p><p>Code has to run on client side(Laptop with Python installed).</p><p>Prerequisites:</p><p>1.OPC UA installed on KUKA Controller.</p><ol><li><p>Install OPCUA using PIP install</p></li><li><p>PIP Install Cryptography</p></li></ol><p><img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/installOPC.png" data-src="/assets/img/posts/installOPC.png" alt="installOPC" /> <img class="lozad imgViewer mfp-zoom" data-mfp-src="/assets/img/posts/installCRYPT.png" data-src="/assets/img/posts/installCRYPT.png" alt="installCRYPT" /></p><p><b>Below code will connect with KUKA Controller OPC port &gt; fetch data from node &gt; Print Data (Here MyPos Variable from $config.dat)&gt;Logs data to CSV file to specified path.</b></p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">opcua</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Starting"</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"opc.tcp://192.168.1.147:4840"</span> <span class="c1"># IP Address of KLI - KUKA
</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">client</span><span class="p">.</span><span class="n">set_user</span><span class="p">(</span><span class="s">"opcuaoperator"</span><span class="p">)</span><span class="c1">#Check username with KUKA OPC Documentation
</span>                
<span class="n">client</span><span class="p">.</span><span class="n">set_password</span><span class="p">(</span><span class="s">"kuka"</span><span class="p">)</span><span class="c1">#Check password with KUKA OPC Documentation
</span>
<span class="n">client</span><span class="p">.</span><span class="n">connect</span><span class="p">()</span>


<span class="k">print</span><span class="p">(</span><span class="s">"Client Connected to KUKA OPC Server"</span><span class="p">)</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">get_node</span><span class="p">(</span><span class="s">"ns=5;s=MotionDeviceSystem.ProcessData.R1.System.$config.MYPOS.X"</span><span class="p">)</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">get_node</span><span class="p">(</span><span class="s">"ns=5;s=MotionDeviceSystem.ProcessData.R1.System.$config.MYPOS.Y"</span><span class="p">)</span>
<span class="n">Z</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">get_node</span><span class="p">(</span><span class="s">"ns=5;s=MotionDeviceSystem.ProcessData.R1.System.$config.MYPOS.Z"</span><span class="p">)</span>  <span class="c1"># $ACCU_STATE is battery state
</span>
<span class="n">Xx</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">X</span><span class="p">.</span><span class="n">get_value</span><span class="p">())</span>
<span class="n">Yy</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Y</span><span class="p">.</span><span class="n">get_value</span><span class="p">())</span>
<span class="n">Zz</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Z</span><span class="p">.</span><span class="n">get_value</span><span class="p">())</span>
        
<span class="k">print</span><span class="p">(</span><span class="s">"My Pos:"</span> <span class="o">+</span> <span class="s">"X : "</span> <span class="o">+</span> <span class="n">Xx</span> <span class="o">+</span> <span class="s">" Y: "</span> <span class="o">+</span> <span class="n">Yy</span> <span class="o">+</span> <span class="s">" Z: "</span> <span class="o">+</span> <span class="n">Zz</span><span class="p">)</span>

<span class="n">temp</span> <span class="o">=</span> <span class="n">X</span><span class="p">.</span><span class="n">set_value</span><span class="p">(</span><span class="mi">1200</span><span class="p">)</span>
<span class="n">temp</span> <span class="o">=</span> <span class="n">Y</span><span class="p">.</span><span class="n">set_value</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">temp</span> <span class="o">=</span> <span class="n">Z</span><span class="p">.</span><span class="n">set_value</span><span class="p">(</span><span class="mi">1174</span><span class="p">)</span>


 <span class="k">with</span> <span class="n">myFile</span><span class="p">:</span>
                         <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="p">.</span><span class="n">writer</span><span class="p">(</span><span class="n">myFile</span><span class="p">)</span>
                         <span class="n">writer</span><span class="p">.</span><span class="n">writerows</span><span class="p">([</span><span class="n">now</span><span class="p">,</span><span class="n">now</span><span class="p">])</span>
                         <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">"E:/"</span><span class="n">filename</span><span class="s">".csv"</span><span class="p">,</span> <span class="s">"a"</span><span class="p">)</span> <span class="k">as</span> <span class="n">log</span><span class="p">:</span>
                             <span class="n">log</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">"{0},{1}</span><span class="se">\n</span><span class="s">"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">now</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">Xx</span><span class="p">)))</span>
                        
                        
</code></pre></div></div><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">See complete “KUKA OPC UA with GUI on Python” at https://github.com/pawankumargurav/kukaopcua</span> 
</code></pre></div></div><hr /> <iframe width="762" height="720" src="https://www.youtube.com/embed/7YP0bGHpXhE" title="OPC UA Data Reading and Logging for KUKA Robot- UA Expert - Tutorial (Hindi)" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe><hr><div class="share-holder"> <span class="share-label">Share on: </span><ul class="share-buttons"><li> <a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Flocalhost%3A4000%2FKUKA-OPC.html&amp;text=OPC%20UA%20Server%20and%20Client%20Simple%20Example%20%E2%80%93%20Python%20-%20Pawankumar%20Gurav" target="_blank" rel="noopener noreferrer" data-toggle="tooltip" data-placement="top" title="Twitter" class="hover-effect-big"> <i class="fa fa-twitter-square fa-fw" aria-hidden="true"></i> </a></li><li> <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2FKUKA-OPC.html" target="_blank" rel="noopener noreferrer" data-toggle="tooltip" data-placement="top" title="Facebook" class="hover-effect-big"> <i class="fa fa-facebook-square fa-fw" aria-hidden="true"></i> </a></li><li> <a href="https://t.me/share/url?url=http%3A%2F%2Flocalhost%3A4000%2FKUKA-OPC.html&amp;text=OPC%20UA%20Server%20and%20Client%20Simple%20Example%20%E2%80%93%20Python%20-%20Pawankumar%20Gurav" target="_blank" rel="noopener noreferrer" data-toggle="tooltip" data-placement="top" title="Telegram" class="hover-effect-big"> <i class="fa fa-telegram fa-fw" aria-hidden="true"></i> </a></li><li> <a href="https://www.linkedin.com/sharing/share-offsite/?url=http%3A%2F%2Flocalhost%3A4000%2FKUKA-OPC.html" target="_blank" rel="noopener noreferrer" data-toggle="tooltip" data-placement="top" title="LinkedIn" class="hover-effect-big"> <i class="fa fa-linkedin-square fa-fw" aria-hidden="true"></i> </a></li><li> <a href="mailto:?subject=OPC%20UA%20Server%20and%20Client%20Simple%20Example%20%E2%80%93%20Python%20-%20Pawankumar%20Gurav&amp;body=OPC%20UA%20Server%20and%20Client%20Simple%20Example%20%E2%80%93%20Python%20-%20Pawankumar%20Gurav%20http%3A%2F%2Flocalhost%3A4000%2FKUKA-OPC.html" target="_blank" rel="noopener noreferrer" data-toggle="tooltip" data-placement="top" title="Email" class="hover-effect-big"> <i class="fa fa-envelope fa-fw" aria-hidden="true"></i> </a></li><li> <a href="javascript:void(0);" onclick="copyToClipboard('http://localhost:4000/KUKA-OPC.html', 'Link copied!')" id="copytoclipboard" data-toggle="tooltip" data-placement="top" title="Copy link" class="hover-effect-big"> <i class="fa fa-link fa-fw" aria-hidden="true"></i> </a></li></ul></div></div></div><div class="pagination_wrapper"><nav aria-label="Page navigation"><ul class="pagination" style="opacity:0"><li><a href="javascript:void(0);">1</a></li></ul></nav></div></div><div class="footer-wrapper"><div class="footer-container"><footer translate="no"><div class="footer-text footer-text-centered long-copyright"><p>&copy; 2022 Pawankumar Gurav.</p><a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en" target="_blank" rel="noopener noreferrer" data-toggle="tooltip" data-placement="top" data-tooltip-no-hide title="Except where otherwise noted, content on this web site is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License."> <img src="/assets/img/default/cc/cc.svg" alt="cc" width="12" height="12">&nbsp;<img src="/assets/img/default/cc/by.svg" alt="by" width="12" height="12">&nbsp;<img src="/assets/img/default/cc/sa.svg" alt="sa" width="12" height="12">&nbsp;<p>Some rights reserved.</p></a></div><p class="footer-powered"><style> body {font-family: Arial, Helvetica, sans-serif;} /* The Modal (background) */ .modal { display: none; /* Hidden by default */ position: fixed; /* Stay in place */ z-index: 1; /* Sit on top */ left: 0; top: 0; width: 100%; /* Full width */ height: 100%; /* Full height */ overflow: auto; /* Enable scroll if needed */ background-color: rgb(0,0,0); /* Fallback color */ background-color: rgba(0,0,0,0.4); /* Black w/ opacity */ -webkit-animation-name: fadeIn; /* Fade in the background */ -webkit-animation-duration: 0.4s; animation-name: fadeIn; animation-duration: 0.4s } /* Modal Content */ .modal-content { position: fixed; bottom: 0; background-color: #fefefe; width: 100%; -webkit-animation-name: slideIn; -webkit-animation-duration: 0.4s; animation-name: slideIn; animation-duration: 0.4s } /* The Close Button */ .close { color: rgb(253, 4, 4); float: right; font-size: 28px; font-weight: bold; } .close:hover, .close:focus { color: #000; text-decoration: none; cursor: pointer; } .modal-header { padding: 2px 16px; background-color: #c9bd1b80; color: white; } .modal-body {padding: 2px 16px;} .modal-footer { padding: 2px 16px; background-color: #60af60; color: white; } /* Add Animation */ @-webkit-keyframes slideIn { from {bottom: -300px; opacity: 0} to {bottom: 0; opacity: 1} } @keyframes slideIn { from {bottom: -300px; opacity: 0} to {bottom: 0; opacity: 1} } @-webkit-keyframes fadeIn { from {opacity: 0} to {opacity: 1} } @keyframes fadeIn { from {opacity: 0} to {opacity: 1} } .button-12 { display: flex; flex-direction: column; align-items: center; padding: 6px 10px; font-family: -apple-system, BlinkMacSystemFont, 'Roboto', sans-serif; border-radius: 6px; border: none; background: #ff4949; box-shadow: 0px 0.5px 1px rgba(0, 0, 0, 0.1), inset 0px 0.5px 0.5px rgba(255, 255, 255, 0.5), 0px 0px 0px 0.5px rgba(0, 0, 0, 0.12); color: #DFDEDF; user-select: none; -webkit-user-select: none; touch-action: manipulation; } .button-12:focus { box-shadow: inset 0px 0.8px 0px -0.25px rgba(255, 255, 255, 0.2), 0px 0.5px 1px rgba(0, 0, 0, 0.1), 0px 0px 0px 3.5px rgba(58, 108, 217, 0.5); outline: 0; }</style></p></footer></div></div><div class="scroll-to-top-container"> <a id="scroll-to-top" href="#main-wrapper" class="hover-effect"><i class="fa fa-angle-up"></i></a></div></div><div class="searchbox-container"> <form id="searchbox-form" autocomplete="off"> <input type="search" id="search-box" placeholder="Search" onkeyup="if(this.value!==''){document.getElementById('search-results').style.display = 'block';}" onfocusout="this.value='';" onblur="setTimeout(function(){ document.getElementById('search-results').style.display = 'none'; }, 100);"><ul id="search-results" ></ul></form></div><script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v0.4.1/dist/bootstrap-toc.min.js"></script> <script src="/assets/js/main.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script> <script> $('.imgViewer[data-no-image-viewer]').css("cursor", "unset"); $(function () { $('.imgViewer:not([data-no-image-viewer])').magnificPopup({ type: 'image' ,image: { titleSrc: 'alt' /* Error message */ ,tError: 'The image could not be loaded.<br><br>%url%' /* Set to null to disable zoom out cursor. */ /*,cursor: null */ } ,closeOnContentClick: true ,showCloseBtn: false ,zoom: { /* By default it's false, so don't forget to enable it */ enabled: true /* duration of the effect, in milliseconds */ ,duration: 300 /* CSS transition easing function */ ,easing: 'ease-in-out' } }); }); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js"></script> <script> /* lazy loads elements with default selector as '.lozad' */ const observer = lozad(); observer.observe(); </script> <script> PagerPageNumbers.setProperties({ paginatorListContainerName: ".pagination_wrapper .pagination" ,pageList: ["/kukaserver.html", "/HRC.html", "/IndustrialAutomation.html", "/zoomEarth.html", "/cobot.html", "/amplication.html", "/KUKA-OPC.html", "/FRI.html"] ,firstButtonName: 'First' ,lastButtonName: 'Last' ,prevButtonName: "«" ,nextButtonName: "»" }); </script> <script src="/assets/js/simple-jekyll-search-1.9.2.min.js"></script><script> function loadSearch(jsonData, searchParam) { if (!jsonData) jsonData = '/query/search.json'; var searchInput = document.getElementById('search-box'); const simpleJekyllSearch = SimpleJekyllSearch({ searchInput: searchInput ,resultsContainer: document.getElementById('search-results') ,json: jsonData ,searchResultTemplate: '<li> <a href="{url}"><div><div class="title">{title}</div><div class="date">{date}</div><div style="clear: both;"></div></div></a></li>' ,noResultsText: '<li>No results found.</li>' ,limit: 10 ,fuzzy: false ,formSubmit: document.getElementById('searchbox-form') }); if (searchParam) { searchInput.value = searchParam; searchInput.focus(); searchInput.disabled=false; setTimeout(function(){ simpleJekyllSearch.search(searchParam); }, 400); } } </script> <script> function isEmpty(value) { if (value === "" || value === null || typeof value === "undefined") return true; return false; } function getQueryParam (param, mach = true) { var queryString = window.location.search.substring(1); if (isEmpty(queryString)) return null; var queries = queryString.split("&"); for (var i in queries) { var pair = decodeURIComponent(queries[i]).split("="); if (mach == true){ if (pair[0] == param) { if (isEmpty(pair[1]) === false) return pair[1]; } }else{ return pair; } break; } return null; } const searchParam = getQueryParam('search'); (async () => { let resp = await fetch('/query/search.json'); if (!resp.ok) return; let jsonData = await resp.json(); loadSearch(jsonData, searchParam); })(); </script> <script> CookieConsent.consentSettingHtml = "<h5>Cookie settings</h5><br><p class=\"info-text\">This website uses cookies to optimize site functionality. It will be activated with your approval. Please click each item below for cookie policy. Check <a href=\"/privacy-policy.html\">Privacy policy</a>.</p><table><tr><td onclick=\"$('.info[data-consent-info=necessary]').slideToggle();$(this).children('i').toggleClass('fa-plus-square-o').toggleClass('fa-minus-square-o')\"> <i class=\"fa-fw fa fa-plus-square-o\" aria-hidden=\"true\"></i><p>Strictly necessary cookies</p></td><td> <span class=\"active_text\">Always active</span></td></tr></table><div class=\"info\" data-consent-info=\"necessary\"><p>These cookies are essential for the website function and cannot be disable. They are usually set when site function like color scheme etc. is changed. These cookies do not store any personally identifiable information. Enables storage related to security such as authentication functionality, fraud prevention, and other user protection.</p></div><table><tr><td onclick=\"$('.info[data-consent-info=analytics]').slideToggle();$(this).children('i').toggleClass('fa-plus-square-o').toggleClass('fa-minus-square-o')\"> <i class=\"fa-fw fa fa-plus-square-o\" aria-hidden=\"true\"></i><p>Performance cookies</p></td><td> <label class=\"slide-switch\"> <input type=\"checkbox\" class=\"checkbox_switch\" checked=\"checked\" data-consent=\"analytics\"> <span class=\"slider\"></span> </label></td></tr></table><div class=\"info\" data-consent-info=\"analytics\"><p>Enables storage (such as cookies) related to analytics e.g. visit duration.</p></div><table><tr><td onclick=\"$('.info[data-consent-info=preferences]').slideToggle();$(this).children('i').toggleClass('fa-plus-square-o').toggleClass('fa-minus-square-o')\"> <i class=\"fa-fw fa fa-plus-square-o\" aria-hidden=\"true\"></i><p>Functionality cookies</p></td><td> <label class=\"slide-switch\"> <input type=\"checkbox\" class=\"checkbox_switch\" data-consent=\"preferences\"> <span class=\"slider\"></span> </label></td></tr></table><div class=\"info\" data-consent-info=\"preferences\"><p>Enables storage that supports the functionality of the website or app e.g. language settings. Enables storage related to personalization e.g. video recommendations.</p></div><table><tr><td onclick=\"$('.info[data-consent-info=advertising]').slideToggle();$(this).children('i').toggleClass('fa-plus-square-o').toggleClass('fa-minus-square-o')\"> <i class=\"fa-fw fa fa-plus-square-o\" aria-hidden=\"true\"></i><p>Targeting and advertising cookies</p></td><td> <label class=\"slide-switch\"> <input type=\"checkbox\" class=\"checkbox_switch\" data-consent=\"advertising\"> <span class=\"slider\"></span> </label></td></tr></table><div class=\"info\" data-consent-info=\"advertising\"><p>Enables storage (such as cookies) related to advertising.</p></div><br><div class=\"button-holder\"> <a href=\"javascript:void(0);\" class=\"btn-base btn-left\" onclick=\"CookieConsent.consentSettingDone('deny');\" role=\"button\">Deny</a> <a href=\"javascript:void(0);\" class=\"btn-base btn-priority\" onclick=\"CookieConsent.consentSettingDone('accept');\" role=\"button\">Allow all</a> <a href=\"javascript:void(0);\" class=\"btn-base \" onclick=\"CookieConsent.consentSettingDone('save');\" role=\"button\">Allow selection</a></div>"; CookieConsent.consentBarHtml = "<div class=\"consent-bar\"> <a class=\"close-button\" href=\"javascript:void(0);\" onclick=\"CookieConsent.hideConsentBar();\"><i class=\"fa-fw fa fa-times\"></i></a><p>This website uses cookies to optimize site functionality. It will be activated with your approval. Check <a href=\"/privacy-policy.html\">Privacy policy</a>.</p><a href=\"javascript:void(0);\" class=\"btn-base \" onclick=\"CookieConsent.consentBarDone('deny');\" role=\"button\">Deny</a> <a href=\"javascript:void(0);\" class=\"btn-base \" onclick=\"CookieConsent.consentBarDone('settings');\" role=\"button\">Customize</a> <a href=\"javascript:void(0);\" class=\"btn-base btn-priority\" onclick=\"CookieConsent.consentBarDone('accept');\" role=\"button\">Allow all</a></div>"; CookieConsent.consent_items = JSON.parse('{"necessary":{"group":["security_storage"],"value":"granted","wait_for_update":500,"cookie_domain":"","no_check_box":true},"analytics":{"group":["analytics_storage"],"value":"denied"},"preferences":{"group":["functionality_storage","personalization_storage"],"value":"denied"},"advertising":{"group":["ad_storage"],"value":"denied"}}'); CookieConsent.hideConsentBarWithSaveButton = true; const consent_settings = CookieConsent.getConsentSettings(); const default_configs = JSON.parse('{"anonymize_ip":true,"ads_data_redaction":true,"cookie_flags":"SameSite=None;Secure"}'); </script></body></html>
